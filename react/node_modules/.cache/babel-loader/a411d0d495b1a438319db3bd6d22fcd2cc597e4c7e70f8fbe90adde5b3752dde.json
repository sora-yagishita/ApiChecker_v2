{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ygst_\\\\myFile\\\\myProject\\\\ApiChecker\\\\src\\\\StatusDisplay.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ConvertJson(api) {\n  const apiParams = {};\n  api.apiParams.forEach(param => {\n    apiParams[param.key] = param.value;\n  });\n  console.log(apiParams);\n  return apiParams;\n}\n_c = ConvertJson;\nfunction StatusDisplay() {\n  _s();\n  const [apiInfo, setApiInfo] = useState([]);\n  const [statusCodes, setStatusCodes] = useState({});\n  const [lastApiRequestTime, setLastApiRequestTime] = useState(null);\n  useEffect(() => {\n    const endpointData = require('./endpoints.json');\n    const apiInfo = endpointData.apiInfo;\n    setApiInfo(apiInfo);\n    apiInfo.forEach(api => {\n      fetchStatusCode(api);\n    });\n    const intervalId = setInterval(() => {\n      apiInfo.forEach(api => {\n        fetchStatusCode(api);\n      });\n    }, 3600000);\n    return () => clearInterval(intervalId);\n  }, []);\n  const fetchStatusCode = async api => {\n    const params = ConvertJson(api);\n    await axios.get(api.apiEndpoint, {\n      params: {\n        params\n      }\n    }).then(response => {\n      setStatusCodes(prevStatusCodes => ({\n        ...prevStatusCodes,\n        [api.apiName]: response.status\n      }));\n      setLastApiRequestTime(new Date());\n    }).catch(error => {\n      console.error(`${api.apiName} API呼び出し中にエラーが発生しました`, error);\n      setStatusCodes(prevStatusCodes => ({\n        ...prevStatusCodes,\n        [api.apiName]: error.response.status\n      }));\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: apiInfo.map(api => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"API\\u540D: \", api.apiName]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\u30B9\\u30C6\\u30FC\\u30BF\\u30B9\\u30B3\\u30FC\\u30C9: \", statusCodes[api.apiName]]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\u6700\\u7D42\\u66F4\\u65B0\\u6642\\u9593: \", lastApiRequestTime ? lastApiRequestTime.toLocaleTimeString() : 'まだ送信されていません']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this)]\n    }, api.apiName, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(StatusDisplay, \"UfPgn0ypdLfdm0kLmZOHikQBmrE=\");\n_c2 = StatusDisplay;\nexport default StatusDisplay;\nvar _c, _c2;\n$RefreshReg$(_c, \"ConvertJson\");\n$RefreshReg$(_c2, \"StatusDisplay\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","ConvertJson","api","apiParams","forEach","param","key","value","console","log","_c","StatusDisplay","_s","apiInfo","setApiInfo","statusCodes","setStatusCodes","lastApiRequestTime","setLastApiRequestTime","endpointData","require","fetchStatusCode","intervalId","setInterval","clearInterval","params","get","apiEndpoint","then","response","prevStatusCodes","apiName","status","Date","catch","error","children","map","fileName","_jsxFileName","lineNumber","columnNumber","toLocaleTimeString","_c2","$RefreshReg$"],"sources":["C:/Users/ygst_/myFile/myProject/ApiChecker/src/StatusDisplay.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction ConvertJson(api) {\r\n  const apiParams = {};\r\n  api.apiParams.forEach((param) => {\r\n    apiParams[param.key] = param.value;\r\n  });\r\n  console.log(apiParams);\r\n  return apiParams;\r\n}\r\n\r\nfunction StatusDisplay() {\r\n  const [apiInfo, setApiInfo] = useState([]);\r\n  const [statusCodes, setStatusCodes] = useState({});\r\n  const [lastApiRequestTime, setLastApiRequestTime] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const endpointData = require('./endpoints.json');\r\n    const apiInfo = endpointData.apiInfo;\r\n\r\n    setApiInfo(apiInfo);\r\n\r\n    apiInfo.forEach((api) => {\r\n      fetchStatusCode(api);\r\n    });\r\n\r\n    const intervalId = setInterval(() => {\r\n      apiInfo.forEach((api) => {\r\n        fetchStatusCode(api);\r\n      });\r\n    }, 3600000);\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, []);\r\n\r\n  const fetchStatusCode = async (api) => {\r\n    const params = ConvertJson(api);\r\n    await axios.get(\r\n      api.apiEndpoint,\r\n      {\r\n        params: {\r\n          params\r\n        }\r\n      }\r\n    ).then(response => {\r\n      setStatusCodes((prevStatusCodes) => ({\r\n        ...prevStatusCodes,\r\n        [api.apiName]: response.status,\r\n      }));\r\n      setLastApiRequestTime(new Date());\r\n    }).catch(error => {\r\n      console.error(`${api.apiName} API呼び出し中にエラーが発生しました`, error);\r\n      setStatusCodes((prevStatusCodes) => ({\r\n        ...prevStatusCodes,\r\n        [api.apiName]: error.response.status,\r\n      }));\r\n    })\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {apiInfo.map((api) => (\r\n        <div key={api.apiName}>\r\n          <p>API名: {api.apiName}</p>\r\n          <p>ステータスコード: {statusCodes[api.apiName]}</p>\r\n          <p>最終更新時間: {lastApiRequestTime ? lastApiRequestTime.toLocaleTimeString() : 'まだ送信されていません'}</p>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default StatusDisplay;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}